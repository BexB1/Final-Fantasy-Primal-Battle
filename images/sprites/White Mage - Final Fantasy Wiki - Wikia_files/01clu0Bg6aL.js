define("EventUtils",[smokesignals,document],function(h,d){var e={};h.convert(e);var n=function(){if(d.addEventListener)return function(a,b,c){a.addEventListener(b,c,!1)};if(d.attachEvent)return function(a,b,c){a.attachEvent("on"+b,function(b){c.call(a,b)})}}(),p=function(){if(d.removeEventListener)return function(a,b,c){a.removeEventListener(b,c,!1)};if(d.detachEvent)return function(a,b,c){a.detachEvent("on"+b,c)}}(),q=function(){return d.createEvent?function(a){var b=d.createEvent("HTMLEvents");
b.initEvent(a,!0,!0);return b}:function(a){var b=d.createEventObject();b.eventType=a;return b}}(),r=function(){return d.createEvent?function(a){d.dispatchEvent(a)}:function(a){d.fireEvent("on"+a.eventType,a)}}(),f=function(a){var b=a.element||d,b=a.elements||[b],c=a.event,l=a.callback;a=a.custom;if(c)if(a)e.on(c,l);else{a=0;for(var g=b.length;a<g;a++)n(b[a],c,l)}},m=function(a,b,c){a&&(b?e.emit(a,c):r(q(a)))};return{attach:f,waitForAllCustomEvents:function(a){var b=a.events,c=a.callback,d=[],g=!1;
for(a=0;a<b.length;++a){d[a]=!1;var f=function(a){return function(){d[a]=!0;a:if(!g){for(var e=0;e<b.length;++e)if(!d[e])break a;g=!0;c()}}}(a);e.on(b[a],f)}},customEventTimeout:function(a){var b=a.startEvent,c=a.targetEvent,d=a.duration,e=a.event,h=a.error;a=function(){k=window.setTimeout(function(){e?m(e,!0):showFallback(Error(h))},d)};var k;b?f({event:b,custom:!0,callback:a}):a();f({event:c,custom:!0,callback:function(){k&&window.clearTimeout(k)}})},detach:function(a){var b=a.element||d,b=a.elements||
[b],c=a.event,f=a.callback;a=a.custom;if(c)if(a)e.off(c);else{a=0;for(var g=b.length;a<g;a++)p(b[a],c,f)}},trigger:m,stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){a.preventDefault&&a.preventDefault();a.returnValue=!1},getClickXY:function(a){return"pageX"in a?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.clientX+d.documentElement.scrollLeft,pageY:a.clientY+d.documentElement.scrollTop}}}});